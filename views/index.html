<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>首页</title>
	<link rel="stylesheet" href="bootstrap.min.css" >
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" type="text/css" href="/wangEditor/dist/css/wangEditor.min.css">
	<script src="http://apps.bdimg.com/libs/angular.js/1.4.6/angular.min.js"></script>
  	<script src="http://apps.bdimg.com/libs/angular-route/1.3.13/angular-route.min.js"></script>
  	<script src="http://apps.bdimg.com/libs/angular-resource/1.2.16/angular-resource.js"></script>
 	<script src="http://cdn.bootcss.com/angular-sanitize/1.6.2/angular-sanitize.min.js"></script>
	<script type="text/javascript" src="js/myfocus-2.0.1.min.js"></script>
	<script type="text/javascript">
		myFocus.set({
	    id:'boxID',//焦点图盒子ID
	    pattern:'mF_fancy',//风格应用的名称
	    time:3,//切换时间间隔(秒)
	    trigger:'click',//触发切换模式:'click'(点击)/'mouseover'(悬停)
	    loadIMGTimeout:"0",
	    width:996,//设置图片区域宽度(像素)
	    height:432,//设置图片区域高度(像素)
	    txtHeight:'default'//文字层高度设置(像素),'default'为默认高度，0为隐藏
		});
	</script>
</head>
<body>
	<div class="head">
		<div class="headbody">
			<div class="logo">
				<a href=""><img src="img/logo.jpg" alt="logo" width=40px height=40px ></a>
			</div>

			<div class="check">
				<div class="search">
				<form action="https://www.baidu.com/s" target="_blank" method="get">
					<input type="text" class="it">
					<input type="submit" value="" class="s">
				</form>
				</div>

				<div class="gouwuche"><a href=""><img src="img/gwc.jpg" alt=""  width="30" height="30"; ></a>
				<a  href="">购物车</a>
				</div>
				<%  if(!ss){ %>
				<div class="dl"><p>登录</p>
				</div>
				<% }else{ %>
				<div class="ydl"><%= ss.username %> 
				<div class="user"><h3>我的笔记</h3><a href="/out">退出登录</a></div></div>
				<% } %>
			</div>

			<div class="list">
				<ul>
					<li><a href="/lujing">路径</a></li>
					<li><a href="">视频</a></li>
					<li><a href="">笔记</a></li>
					<li><a href="">论坛</a></li>
				</ul>
			</div>
		</div>
	</div>
<div ng-app="myapp"><div ng-view></div></div>

	

	

	<div class="foot">
		<div class="fcontainer">
		<div class="footbody1">		
				<a href="" id="f1"></a>
				<a href="" id="f2"></a>
				<a href="" id="f3"></a>
				<a href="" id="f4"></a>		
		</div>
		<div class="footbody2">
			<ul>
				<li><a href="" >关于我们</a></li>
				<li><a href="" >企业合作</a></li>
				<li><a href="" >人才招聘</a></li>
				<li><a href="" >联系我们</a></li>
			</ul>
		</div>
		<div class="footbody3">
			<h4>&copy; 2017   京ICP备 13046642号-2</h4>
		</div>
		</div>
	</div>

	<div class="goto">
		<a href="">意见反馈</a><a href="">常见问题</a><a href="">APP下载</a><a href="#top">返回顶部</a>
	</div>

	
	<div class="login login1">
		<div class="login-t"><h1>欢迎登陆</h1></div>
		<div class="login-b">
			<form action="/denglu" method="post">
			<input type="text" name="username" class="denglu" placeholder="请输入用户名">
			<input type="password" name="userpsw" class="mima">
			<div class="rm">
			<input type="checkbox" name="sex" id="male" value="male">
			<label for="male">记住我</label></div>
			<input type="button" class="bt dlb" value="登录">
			<input type="button" class="bt bt1" value="注册">

			</form>
		</div>
	</div>

	<div class="login register">
		<div class="login-t"><h1>欢迎注册</h1></div>
		<div class="login-b register-b">
			<form action="/zhuce" method="post">
			<input type="text" name="username" class="denglu zc1 zcn" value="起个名字吧">
			<input type="text" name="useremail" class="denglu zc1 zcy" value="手机号| 邮箱">
			<input type="password" name="userpsw" class="mima zc1 zcm">
			<div class="rm">
			<input type="checkbox" name="sex" id="male" value="male">
			<label for="male"> 我同意并遵守<a href="">服务条款</a></label></div>
			
			<input type="button" class="bt zcb" value="注册">

			</form>
		</div>
	</div>
	


	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script type="text/javascript" src="/wangEditor/dist/js/wangEditor.min.js"></script>
    <script src="js/bootstrap.min.js" ></script>
	<script type="text/javascript">


	$(document).ready(function(){
			
		
		$(".menu li").hover(function(){
			var index = $(this).prevAll().length;
			var num = -123 - (index - 1)*19;
			$(".submenu").css("top",num + "px");
			
  	});
	});


// 登陆
	$(document).ready(function(){
		$(".dl").click(function(){
    		var sheight =$(document).height();
			var swidth =$(window).width();

			var loginbg = $("<div></div>").addClass("login-bg").css("height",sheight + "px");
			$(".goto").after(loginbg);

			$(".login-bg").click(function(){
    		 	$(this).remove();
    		 	$(".login").css("display","none");
			});	
			$(".login1").css("display","block");
		});  

		$(".bt1").click(function(){
			$(".register").css("display","block")
		}); 
	});


	$(".zc1").blur(function(){
		if(!this.value){
			$(this).css("border-bottom","2px solid #EE0000");
			alert("不能为空");
		}else{
			$(this).css("border-bottom","2px solid white");
		}
  
});

	$(".zcb").click(function(){
    $.post("/zhuce",
    {
        username:$(".zcn").val(),
        useremail:$(".zcy").val(),
        userpsw:$(".zcm").val()
    },
        function(result){
        	if(result =="-1"){
        		alert("重复");
        	}
        	else{
        		alert("成功");
        	};
        
    });
});
	$(".dlb").click(function(){
    $.post("/denglu",
    {
        username:$(".denglu").val(),
        userpsw:$(".mima").val()
    },
        function(result){
        	if(result =="-1"){
        		alert("未注册");
        	}
        	else if(result =="-3"){
        		alert("密码错误");
        	}
        	else{
        		alert("成功");
        		$(".login-bg").remove();
    		 	$(".login").css("display","none");
    		 	location.reload(true);
        	}
        
    });
});





	</script>
	<script type="text/javascript">


// 推荐

	$(document).ready(function(){
		$("#next1").click(function(){
			var bleft = parseInt($(".booktjshow1").css("left"));
			
			if (bleft > -10 ) {
			$(".booktjshow1").animate({left:'-=135px'});
		}; 
		});
		$("#prev1").click(function(){
			var bleft = parseInt($(".booktjshow1").css("left"));
			if (bleft < -100 ) {
			$(".booktjshow1").animate({left:'+=135px'});
		};
		});
		$("#next2").click(function(){
			var bleft = parseInt($(".booktjshow2").css("left"));
			
			if (bleft > -10 ) {
			$(".booktjshow2").animate({left:'-=135px'});
		}; 
		});
		$("#prev2").click(function(){
			var bleft = parseInt($(".booktjshow2").css("left"));
			if (bleft < -100 ) {
			$(".booktjshow2").animate({left:'+=135px'});
		};
		});
	});

	</script>
<script>
 


     var app = angular.module('myapp', ['ngResource','ngRoute','ngSanitize']);　　
            app.config(['$routeProvider', function($routeProvider){
                $routeProvider
                .when('/',{
                  templateUrl: '/main.html',
                  // controller: 'ListCtrl', 
                  })
                .when('/lujing/:id',{
                	templateUrl:function($routeParams){return '/路径分类'+$routeParams.id+'.html';},
                    // controller: 'LjCtrl',
                })
                .when('/book/:id',{
                	templateUrl:'/详情.html',
                    controller: 'ListCtrl',
                })
                
                .otherwise({redirectTo:'/'});
            }]);
            app.controller('ListCtrl', ['$scope', '$resource', '$location', '$route',
                function($scope, $resource,$location, $route){ 

              var Books = $resource('/book/:id',{id:'@_id'}); 
                Books.get({id:$route.current.params.id},function(book){ 
                 $scope.book = book; });

              var Pls = $resource('/pinglun/:id',{id:'@_id'}); 
               Pls.query({id:$route.current.params.id},function(pingluns){ 
                 $scope.pingluns = pingluns; }); 

             $scope.savepl = function(){                  
                Pls.save({id:$route.current.params.id},$scope.pinglun, function(){ 
                  $location.path('/book:id'); }); };

              

                $scope.myVar = false;
			    $scope.toggle = function() {
			        $scope.myVar = !$scope.myVar;
			    };

               var Bijis = $resource('/biji/:id',{id:'@_id'}); 
               Bijis.query({id:$route.current.params.id},function(bijis){ 
                 $scope.bijis = bijis; });



              $scope.savebj = function(){ 
                Bijis.save({id:$route.current.params.id},$scope.biji, function(){ 
                  $location.path('/book:id'); }); };

              

            }]);

            // app.controller('BookCtrl', ['$scope', '$resource', '$location','$routeParams',
            //     function($scope, $resource,$location, $routeParams){ 
              
            //     var Books = $resource('/xiangqing/:id',{id:'@_id'}); 
            //    Books.get({id:$routeparams.id},function(book){ 
            //      $scope.book = book; });

            // }]);



       //        var Pls = $resource('/pinglun/:id',{id:'@_id'}); 
       //         Pls.query({id:$route.current.params.id},function(pingluns){ 
       //           $scope.pingluns = pingluns; }); 

       //       $scope.savepl = function(){                  
       //          Pls.save({id:$route.current.params.id},$scope.pinglun, function(){ 
       //            $location.path('/book:id'); }); };

              

       //          $scope.myVar = false;
			    // $scope.toggle = function() {
			    //     $scope.myVar = !$scope.myVar;
			    // };

       //         var Bijis = $resource('/biji/:id',{id:'@_id'}); 
       //         Bijis.query({id:$route.current.params.id},function(bijis){ 
       //           $scope.bijis = bijis; });



       //        $scope.savebj = function(){ 
       //          Bijis.save({id:$route.current.params.id},$scope.biji, function(){ 
       //            $location.path('/book:id'); }); };

              

       



        //     app.controller('editorCtrl', ['$scope', '$resource', '$location',
        //       function ($scope, $resource,$location) {
        //       $scope.editorContent = '';
        //       var Bijis = $resource('/biji'); 
        //        Bijis.query(function(bijis){ 
        //          $scope.bijis = bijis; });


        //       $scope.save = function(){ 
        //         var Bijis = $resource('/biji'); 
        //         Bijis.save($scope.biji, function(){ 
        //           $location.path('/'); }); };




        // }]);
            app.directive('contenteditable', function() {
            return {
                restrict: 'A' ,
                require: '?ngModel',
                link: function(scope, element, attrs, ngModel) {
                    // 初始化 编辑器内容
                    if (!ngModel) {
                        return;
                    } // do nothing if no ng-model
                    // Specify how UI should be updated
                    ngModel.$render = function() {
                        element.html(ngModel.$viewValue || '');
                    };
                    // Listen for change events to enable binding
                    element.on('blur keyup change', function() {
                        scope.$apply(readViewText);
                    });
                    // No need to initialize, AngularJS will initialize the text based on ng-model attribute
                    // Write data to the model
                    function readViewText() {
                        var html = element.html();
                        // When we clear the content editable the browser leaves a <br> behind
                        // If strip-br attribute is provided then we strip this out
                        if (attrs.stripBr && html === '<br>') {
                            html = '';
                        }
                        ngModel.$setViewValue(html);
                    }
        
                    // 创建编辑器
                    var editor = new wangEditor(element);
                    editor.create();
                }
            };
        });
</script>
</body>
</html>